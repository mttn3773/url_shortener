(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{128:function(e,t,r){},129:function(e,t,r){"use strict";r.r(t);var n=r(3),c=r(150),a=r(0),s=r.n(a),i=r(37),o=r.n(i),u=r(28),j=r(21),b=r(147),d=r(139),l=r(140),O=r(15),h=r(29),p=r.n(h),m=r(46),x=r(4),f=function(e){return{type:"SET_USER",payload:e}},g=function(e,t){e.map((function(e){"authentication"===e.param&&t(f({}))}))},v=function(e){return{type:"SET_NOTIFY",payload:e}},S=function(){var e=Object(O.b)(),t=Object(a.useState)(!1),r=Object(x.a)(t,2),n=r[0],c=r[1];return{loading:n,clearErrors:function(){e(v({errors:[]}))},request:function(){var t=Object(m.a)(p.a.mark((function t(r){var n,a,s,i,o,u,j;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.url,a=r.method,s=r.body,i=r.headers,t.prev=1,i.Accept="application/json, text/plain, */*",i["Content-Type"]="application/json",o=JSON.stringify(s),c(!0),e(v({loading:!0})),t.next=9,fetch(n,{method:a,headers:i,credentials:"include",body:o});case 9:return u=t.sent,t.next=12,u.json();case 12:if(!(j=t.sent).errors){t.next=17;break}return g([j.errors],e),e(v({errors:j.errors,loading:!1})),t.abrupt("return",j);case 17:return e(v({loading:!1})),c(!1),t.abrupt("return",j);case 22:return t.prev=22,t.t0=t.catch(1),g([t.t0],e),e(v({errors:t.t0.message||"Something went wrong",loading:!1})),c(!1),e(v({loading:!1})),t.abrupt("return",{errors:[{msg:t.t0.message||"Something went wrong"}]});case 29:case"end":return t.stop()}}),t,null,[[1,22]])})));return function(e){return t.apply(this,arguments)}}(),dispatchError:function(t){e(v({errors:[{msg:t.msg||"Something went wrong"}]}))}}},y=function(e){Object(j.a)(e);var t=Object(O.c)((function(e){return e.authReducer.user})),r=S(),c=r.request,a=r.dispatchError,s=Object(b.a)(),i=null;return t&&(i=Object(n.jsxs)(d.a,{gridGap:"3rem",justifyItems:"center",mx:"auto",color:"gray.100",children:[Object(n.jsx)(u.b,{to:"/create",children:Object(n.jsx)(l.a,{_hover:{color:"gray.300"},children:"CREATE LINK "})}),Object(n.jsx)(u.b,{to:"#",onClick:function(){c({url:"/api/user/logout",method:"POST",headers:{}}).then((function(e){return s({title:"Success!",description:e.message,status:"success",duration:3e3,isClosable:!0}),window.location.reload()}),(function(e){return a(e),window.location.reload()}))},children:Object(n.jsx)(l.a,{_hover:{color:"gray.300"},children:" LOGOUT"})})]})),Object(n.jsxs)(d.a,{position:"sticky",top:"0",bgColor:"#333",h:"60px",alignItems:"center",children:[Object(n.jsx)(l.a,{color:"gray.100",mx:"3rem",children:Object(n.jsx)(u.b,{to:"/",children:"URL-shortener"})}),i]})},w=r(146),E=r(149),k=function(e){Object(j.a)(e);var t=S().clearErrors,r=Object(O.c)((function(e){return e.notifyReducer.errors})),c=Object(O.c)((function(e){return e.notifyReducer.loading})),s=Object(b.a)();return Object(a.useEffect)((function(){var e;r&&r.length&&(e=r[0]?r[0].msg||"Something went wrong":r.msg||"Something went wrong",s({title:"Error",description:e||"Something went wrong",status:"error",duration:3e3,isClosable:!0}),t())}),[r]),Object(n.jsxs)(w.a,{isOpen:c,onClose:function(){},children:[Object(n.jsx)(w.d,{}),Object(n.jsx)(w.c,{background:"rgba(0, 0, 0, 0.5)",children:Object(n.jsx)(w.b,{display:"flex",textAlign:"center",justifyItems:"center",padding:"5rem 5rem",children:Object(n.jsx)(E.a,{isIndeterminate:!0,margin:"auto",size:"60px",color:"green.300"})})})]})},T=r(13),R=r(148),_=r(44),C=r(43),L=r(104),I=r(53),D=r(142),F=r(151),U=function(e){var t,r=e.type,c=e.withLabel,a=void 0===c||c,s=Object(L.a)(e,["type","withLabel"]),i=Object(_.d)(s),o=Object(x.a)(i,2),u=o[0];o[1].error;return Object(n.jsxs)(I.a,{id:u.name,children:[a&&Object(n.jsx)(D.a,{children:(t=u.name,t[0].toUpperCase()+t.slice(1))}),Object(n.jsx)(_.a,{name:u.name,component:"div",className:"error-text"}),Object(n.jsx)(F.a,Object(C.a)(Object(C.a)({},u),{},{type:r}))]})},A=function(e){Object(j.a)(e);var t=S(),r=t.request,c=t.dispatchError,s=Object(a.useState)(!1),i=Object(x.a)(s,2),o=i[0],u=i[1],l=Object(b.a)();return o?Object(n.jsx)(T.a,{to:"/"}):Object(n.jsx)(_.c,{initialValues:{to:""},onSubmit:function(){var e=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r({url:"/api/link/generate",method:"POST",headers:{},body:t});case 2:if(!(n=e.sent).errors){e.next=5;break}return e.abrupt("return",c(n.errros));case 5:return l({title:"Success!",description:"Link added",status:"success",duration:3e3,isClosable:!0}),e.abrupt("return",u(!0));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(n.jsx)(_.b,{children:Object(n.jsxs)(d.a,{w:"50%",mx:"auto",my:"4rem",direction:"column",gridGap:"3rem",alignItems:"center",children:[Object(n.jsx)(U,{type:"to",name:"to",withLabel:!1}),Object(n.jsx)(R.a,{w:"10%",colorScheme:"blue",type:"submit",disabled:t,children:"ADD"})]})})}})},N=function(e){Object(j.a)(e);var t=Object(T.g)().id,r=S(),c=r.request,s=r.dispatchError,i=Object(a.useState)(),o=Object(x.a)(i,2),u=o[0],b=o[1],O=Object(a.useState)(!1),h=Object(x.a)(O,2),f=h[0],g=h[1],v=function(){var e=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({url:"/api/link/".concat(t),method:"DELETE",headers:{}});case 2:e.sent.errors||g(!0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){t&&c({url:"/api/link/".concat(t),method:"GET",headers:{}}).then((function(e){return b(e.link)}),(function(e){return s(e)}))}),[t]),f?Object(n.jsx)(T.a,{to:"/"}):u?Object(n.jsxs)(d.a,{direction:"column",mx:"auto",w:"50%",my:"5rem",alignItems:"center",gridGap:"2rem",children:[Object(n.jsxs)(l.a,{as:"b",children:["From:"," ",Object(n.jsx)("a",{href:u.from,target:"_blank",children:u.from})]}),Object(n.jsxs)(l.a,{children:[" To: ",u.to]}),Object(n.jsxs)(l.a,{children:["Created At: ",new Date(u.created_at).toLocaleDateString()]}),Object(n.jsxs)(l.a,{children:[" Clicks: ",u.clicks]}),Object(n.jsx)("a",{href:u.from,children:"Re"}),Object(n.jsx)(l.a,{as:"a",onClick:function(){return v(u._id)},children:"Delete"})]}):Object(n.jsx)(l.a,{children:"Loading..."})},P=r(143),q=r(144),G=function(e){var t={};return e.errors.map((function(e){e.param&&(t[e.param]=e.msg)})),t},W=function(e){var t=e.url,r=e.onSuccessMessage,c=S().request,s=Object(a.useState)(),i=Object(x.a)(s,2),o=i[0],u=i[1],j=Object(O.b)(),l=Object(O.c)((function(e){return e.notifyReducer})).loading,h=Object(b.a)();return o?Object(n.jsx)(T.a,{to:"/",exact:!0}):Object(n.jsx)("div",{children:Object(n.jsx)(_.c,{initialValues:{email:"",password:""},onSubmit:function(){var e=Object(m.a)(p.a.mark((function e(n,a){var s,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setSubmitting,s=a.setErrors,e.next=3,c({url:t,method:"POST",body:n,headers:{}});case 3:if(!(i=e.sent).errors){e.next=8;break}return o=G({errors:i.errors}),s(o),e.abrupt("return");case 8:if(!i.user){e.next=12;break}return j(f({user:i.user})),h({title:"Success!",description:r,status:"success",duration:3e3,isClosable:!0}),e.abrupt("return",u(!0));case 12:return e.abrupt("return");case 13:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,r=e.errors;return Object(n.jsx)(_.b,{children:Object(n.jsxs)(d.a,{w:"50%",m:"auto",border:"2px solid ".concat(r.email||r.password?"tomato":"green"),borderRadius:"5px",padding:"2rem 3rem",justifyItems:"center",direction:"column",children:[Object(n.jsx)(P.a,{w:"65%",m:"auto",mb:"2rem",children:Object(n.jsx)(U,{type:"email",name:"email"})}),Object(n.jsx)(P.a,{w:"65%",m:"auto",mb:"2rem",children:Object(n.jsx)(U,{type:"password",name:"password"})}),Object(n.jsx)(R.a,{_hover:{color:"black",background:"tomato",transition:"0.4s ease-in-out"},transition:"0.4s ease-in-out",type:"submit",margin:"auto",colorScheme:"blue",minW:"5rem",disabled:l||t,children:l||t?Object(n.jsx)(E.a,{isIndeterminate:!0,size:"20px",color:"green.300"}):"Submit"})]})})}})})},B=r(102);r.n(B).a.config();var z={server:{serverUrl:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).SERVER_URL,api:{endpoints:{register:"/api/user",login:"/api/user/login"}}}},K=function(e){return Object(j.a)(e),Object(n.jsxs)(P.a,{children:[Object(n.jsx)(q.a,{as:"h1",size:"2xl",textAlign:"center",marginBottom:"3rem",children:"Sign In"}),Object(n.jsx)(W,{url:z.server.api.endpoints.login,onSuccessMessage:"Logged In Successefully"}),";"]})},M=r(145),V=function(e){var t=e.links;return t.length?Object(n.jsxs)(M.a,{m:"auto",w:"75%",children:[Object(n.jsx)(M.e,{children:Object(n.jsxs)(M.f,{children:[Object(n.jsx)(M.d,{children:" From "}),Object(n.jsx)(M.d,{children:" To "}),Object(n.jsx)(M.d,{children:" Created "})]})}),Object(n.jsx)(M.b,{children:t.map((function(e,t){return Object(n.jsxs)(M.f,{children:[Object(n.jsx)(M.c,{children:Object(n.jsxs)(u.b,{to:"/details/".concat(e._id),children:[" ",e.from," "]})}),Object(n.jsxs)(M.c,{children:[e.to," "]}),Object(n.jsxs)(M.c,{children:[new Date(e.created_at).toLocaleDateString()," "]})]},t)}))})]}):Object(n.jsx)("p",{children:" No links yet"})},H=function(e){Object(j.a)(e),console.log(z.server.serverUrl);var t=S(),r=t.request,c=t.dispatchError,s=(Object(O.c)((function(e){return e.authReducer.user})),Object(O.c)((function(e){return e.notifyReducer.loading})),Object(a.useState)([])),i=Object(x.a)(s,2),o=i[0],u=i[1];return Object(a.useEffect)((function(){r({url:"/api/link",method:"GET",headers:{}}).then((function(e){return u(e.links)}),(function(e){return c(e)}))}),[]),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(V,{links:o})})},J=function(e){return Object(j.a)(e),Object(n.jsxs)(P.a,{children:[Object(n.jsx)(q.a,{as:"h1",size:"2xl",textAlign:"center",marginBottom:"3rem",children:"Sign Up"}),Object(n.jsx)(W,{url:z.server.api.endpoints.register,onSuccessMessage:"We've created account for you"}),";"]})},Y=function(e){Object(j.a)(e);var t="undefined"===typeof function(){var e=S(),t=e.request,r=e.dispatchError,n=Object(O.c)((function(e){return e.authReducer.user})),c=Object(a.useState)(void 0),s=Object(x.a)(c,2),i=s[0],o=s[1],u=Object(O.b)();return Object(a.useEffect)((function(){if(n)return o(!0);t({url:"/api/user/me",method:"GET",headers:{}}).then((function(e){return e.error?o(!1):(u(f({user:e.user})),o(!0))}),(function(e){o(!1),r(e)}))}),[]),i}(),r=Object(O.c)((function(e){return e.authReducer.user}));return t?null:r?Object(n.jsxs)(T.d,{children:[Object(n.jsx)(T.b,{component:A,path:"/create",exact:!0}),Object(n.jsx)(T.b,{component:H,path:"/profile",exact:!0}),Object(n.jsx)(T.b,{component:N,path:"/details/:id"}),Object(n.jsx)(T.a,{to:"/profile"})]}):Object(n.jsxs)(T.d,{children:[Object(n.jsx)(T.b,{component:K,path:"/login",exact:!0}),Object(n.jsx)(T.b,{component:J,path:"/register",exact:!0}),Object(n.jsx)(T.a,{to:"/login"})]})};r(128);var Q=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(u.a,{children:[Object(n.jsx)(y,{}),Object(n.jsx)(k,{}),Object(n.jsx)(Y,{})]})})},X=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,152)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))},Z=r(49),$=Object(Z.combineReducers)({notifyReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{errors:[],loading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFY":return Object(C.a)(Object(C.a)({},e),t.payload);default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(C.a)(Object(C.a)({},e),t.payload);default:return e}}}),ee=r(103),te=Object(Z.createStore)($,Object(ee.composeWithDevTools)());o.a.render(Object(n.jsx)(O.a,{store:te,children:Object(n.jsx)(c.a,{children:Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(Q,{})})})}),document.getElementById("root")),X()}},[[129,1,2]]]);
//# sourceMappingURL=main.e08f1879.chunk.js.map